{%load static%}
{%load humanize%}

<html lang="en">
    <head>
        <meta charset="utf-8">
        <!-- bootstrap -->
        <link rel="stylesheet" href="{% static 'css/bootstrap/bootstrap.min.css' %}">
        

        <link href="{% static "css/animations.css"%}" rel="stylesheet" >

        <!-- Los siguientes permiten que se desplieguen los popovers -->
        <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>

        <!-- panel -->
        <link rel="stylesheet" href="{% static 'css/panel.css' %}">
        {% block aplicacion %} 
        
        {% endblock aplicacion %}

        


    </head>

    <body>

        <div class="row h-100 w-100 m-0">

            <!-- panel -->
            <div class="col-sm-2 p-0">

                <div class="panel">

                    <img class="logo" src="{% static 'img/CFM-LOGOBLANCO2.png' %}">

                    <div class="historial">             

                        <div class="contenedor">
                            <a class="historial" href="../home" class="text-light" >
                                Home
                            </a>
                        </div>

                        
                        <div class="contenedor">
                            {% if historial.home %}
                            <a class="historial" class="text-light"
                             href="../aparato"  >
                                {{historial.home}}
                            </a>
                            {% else %}
                            <a class="historial" class="text-light"
                             href="../aparato"  >
                                Hacer cotización
                            </a>
                            {% endif %}
                        </div>
                        

                        <div class="contenedor">
                            {% if historial.aparato %}
                            <a class="historial" class="text-light"
                             href="../seccion" >
                                {{historial.aparato}}
                            </a>
                            {% else %}
                            <a class="historial" class="text-light"
                             href="../seccion" >
                                Cabezal 622
                            </a>
                            {% endif %}
                        </div>

                        <div class="contenedor">
                            <!-- {% if historial.seccion %}
                            <a class="historial" class="text-light"
                             href="{% url 'pieza_app:pieza' %}">
                                {{historial.seccion}}
                            </a>
                            {% else %}
                            <a class="historial" class="text-light"
                             href="{% url 'pieza_app:pieza' %}">
                                Cuchillo izquierdo
                            </a>
                            {% endif %} -->
                        </div>

                    </div>

                    <!-- Esto está para probar cosas, para ver quien inició sesión -->
                    <!-- <div>
                        <h6>
                            {{user.nombre}} {{user.primerApellido}}
                        </h6>
                    </div> -->

                    <div class="cerrarSesion">

                        <div class="cerrarsesion">    
                            <svg class="icn_cerrar_sesion" fill="currentcolor" height="30" x="0px" y="0px" viewBox="0 0 1024 1280" style="enable-background:new 0 0 1024 1024;" xml:space="preserve"><g><g><g><g>
                            <path  fill="white" d="M716.7,766.3c24.8-24.8,49.6-49.6,74.4-74.4c39.2-39.2,78.4-78.4,117.6-117.6c9-9,18-18,27-27      c19.1-19.1,19.1-51.6,0-70.7c-24.8-24.8-49.6-49.6-74.4-74.4c-39.2-39.2-78.4-78.4-117.6-117.6c-9-9-18-18-27-27      c-9.1-9.1-22.5-14.6-35.4-14.6c-12.3,0-26.9,5.4-35.4,14.6c-8.7,9.5-15.2,22-14.6,35.4c0.6,13.3,5.1,25.8,14.6,35.4      c24.8,24.8,49.6,49.6,74.4,74.4c39.2,39.2,78.4,78.4,117.6,117.6c9,9,18,18,27,27c0-23.6,0-47.1,0-70.7      c-24.8,24.8-49.6,49.6-74.4,74.4c-39.2,39.2-78.4,78.4-117.6,117.6c-9,9-18,18-27,27c-9.1,9.1-14.6,22.5-14.6,35.4      c0,12.3,5.4,26.9,14.6,35.4c9.5,8.7,22,15.2,35.4,14.6C694.6,780.3,707.1,775.9,716.7,766.3L716.7,766.3z"/></g></g><g><g>
                            <path  fill="white" d="M900.3,462c-19.1,0-38.2,0-57.4,0c-45.9,0-91.8,0-137.8,0c-55.6,0-111.1,0-166.7,0      c-48.1,0-96.1,0-144.2,0c-23.4,0-46.8-0.3-70.2,0c-0.3,0-0.7,0-1,0c-12.8,0-26.3,5.6-35.4,14.6c-8.7,8.7-15.2,22.9-14.6,35.4      c0.6,12.9,4.8,26.3,14.6,35.4c9.8,9,21.8,14.6,35.4,14.6c19.1,0,38.2,0,57.4,0c45.9,0,91.8,0,137.8,0c55.6,0,111.1,0,166.7,0      c48.1,0,96.1,0,144.2,0c23.4,0,46.8,0.3,70.2,0c0.3,0,0.7,0,1,0c12.8,0,26.3-5.6,35.4-14.6c8.7-8.7,15.2-22.9,14.6-35.4      c-0.6-12.9-4.8-26.3-14.6-35.4C925.9,467.7,913.9,462,900.3,462L900.3,462z"/></g></g></g><g><g>
                            <path  fill="white" d="M813.7,816c0,26,0,52.1,0,78.1c0,5.1,0.2,10.2-0.5,15.3c0.6-4.4,1.2-8.9,1.8-13.3     c-0.6,4-1.7,7.9-3.2,11.7c1.7-4,3.4-8,5-11.9c-1.7,4.1-3.9,7.9-6.5,11.4c2.6-3.4,5.2-6.7,7.8-10.1c-2.7,3.5-5.8,6.5-9.2,9.2     c3.4-2.6,6.7-5.2,10.1-7.8c-3.6,2.7-7.3,4.8-11.4,6.5c4-1.7,8-3.4,11.9-5c-3.8,1.5-7.7,2.5-11.7,3.2c4.4-0.6,8.9-1.2,13.3-1.8     c-7.5,0.9-15.2,0.5-22.7,0.5c-15.4,0-30.8,0-46.2,0c-51.4,0-102.8,0-154.3,0c-62.1,0-124.2,0-186.4,0c-53.8,0-107.6,0-161.4,0     c-25.4,0-50.9,0.1-76.3,0c-2.5,0-5.1-0.2-7.6-0.5c4.4,0.6,8.9,1.2,13.3,1.8c-4-0.6-7.9-1.7-11.7-3.2c4,1.7,8,3.4,11.9,5     c-4.1-1.7-7.9-3.9-11.4-6.5c3.4,2.6,6.7,5.2,10.1,7.8c-3.5-2.7-6.5-5.8-9.2-9.2c2.6,3.4,5.2,6.7,7.8,10.1     c-2.7-3.6-4.8-7.3-6.5-11.4c1.7,4,3.4,8,5,11.9c-1.5-3.8-2.5-7.7-3.2-11.7c0.6,4.4,1.2,8.9,1.8,13.3c-1.1-8.7-0.5-17.7-0.5-26.5     c0-18.8,0-37.6,0-56.4c0-28,0-56,0-84c0-34.4,0-68.9,0-103.3c0-37.8,0-75.6,0-113.3c0-38.1,0-76.3,0-114.4c0-35.4,0-70.7,0-106.1     c0-29.9,0-59.9,0-89.8c0-21.3,0-42.7,0-64c0-9.8,0-19.5,0-29.3c0-2.6,0.2-5.2,0.5-7.8c-0.6,4.4-1.2,8.9-1.8,13.3     c0.6-4,1.7-7.9,3.2-11.7c-1.7,4-3.4,8-5,11.9c1.7-4.1,3.9-7.9,6.5-11.4c-2.6,3.4-5.2,6.7-7.8,10.1c2.7-3.5,5.8-6.5,9.2-9.2     c-3.4,2.6-6.7,5.2-10.1,7.8c3.6-2.7,7.3-4.8,11.4-6.5c-4,1.7-8,3.4-11.9,5c3.8-1.5,7.7-2.5,11.7-3.2c-4.4,0.6-8.9,1.2-13.3,1.8     c7.5-0.9,15.2-0.5,22.7-0.5c15.4,0,30.8,0,46.2,0c51.4,0,102.8,0,154.3,0c62.1,0,124.2,0,186.4,0c53.8,0,107.6,0,161.4,0     c25.4,0,50.9-0.1,76.3,0c2.5,0,5.1,0.2,7.6,0.5c-4.4-0.6-8.9-1.2-13.3-1.8c4,0.6,7.9,1.7,11.7,3.2c-4-1.7-8-3.4-11.9-5     c4.1,1.7,7.9,3.9,11.4,6.5c-3.4-2.6-6.7-5.2-10.1-7.8c3.5,2.7,6.5,5.8,9.2,9.2c-2.6-3.4-5.2-6.7-7.8-10.1     c2.7,3.6,4.8,7.3,6.5,11.4c-1.7-4-3.4-8-5-11.9c1.5,3.8,2.5,7.7,3.2,11.7c-0.6-4.4-1.2-8.9-1.8-13.3c1.4,10.9,0.5,22.2,0.5,33.2     c0,16.2,0,32.4,0,48.6c0,3.9,0,7.8,0,11.7c0,12.8,5.6,26.3,14.6,35.4c8.7,8.7,22.9,15.2,35.4,14.6c12.9-0.6,26.3-4.8,35.4-14.6     c9-9.8,14.6-21.8,14.6-35.4c0-21.9,0-43.8,0-65.7c0-8.3,0.5-16.8-0.2-25c-1.5-17.7-5.6-35.3-16-50.1c-9.9-14.1-22.2-27-38.2-34.3     c-15.2-6.9-29.7-10.9-46.6-11c-2.8,0-5.6,0-8.5,0c-12.3,0-24.5,0-36.8,0c-44.1,0-88.2,0-132.3,0c-57.5,0-114.9,0-172.4,0     c-54.4,0-108.8,0-163.2,0c-35.9,0-71.9,0-107.8,0c-6.1,0-12.3-0.1-18.4,0c-26.9,0.3-55.5,11.2-73.2,32     c-11.3,13.3-20.8,28.4-24,45.9c-1.3,7.2-2.4,14.6-2.5,22c-0.2,18.4,0,36.7,0,55.1c0,42.1,0,84.2,0,126.3c0,55.6,0,111.2,0,166.8     c0,57.8,0,115.7,0,173.5c0,49.8,0,99.6,0,149.4c0,31.3,0,62.5,0,93.8c0,5.2-0.1,10.4,0,15.6c0.3,26.5,10.7,53.1,30.1,71.5     c19,18,43.6,28,69.8,28.2c21.4,0.2,42.8,0,64.2,0c47.7,0,95.5,0,143.2,0c57.8,0,115.6,0,173.4,0c52.4,0,104.7,0,157.1,0     c31.3,0,62.5,0,93.8,0c20.6,0,40.5-2.9,58.9-13.4c30.6-17.6,49.2-51.1,49.7-86.2c0.1-8,0-15.9,0-23.9c0-20.9,0-41.7,0-62.6     c0-12.8-5.6-26.3-14.6-35.4c-8.7-8.7-22.9-15.2-35.4-14.6c-12.9,0.6-26.3,4.8-35.4,14.6C819.3,790.4,813.7,802.5,813.7,816     L813.7,816z"/></g></g></g>
                        </div>


                        <div>
                            <a class="cerrarsesion text-light" aria-current="page"
                                href="{% url 'login_app:logout' %}">Cerrar sesión</a>
                        </div>

                    </div>

                </div>

            </div>


            <div class="col-sm-10 p-0 d-flex flex-column justify-content-center align-items-center">

                <div class="contenido">
                    
                    
                    <!-- La clase cambia a "carrito ocupado" cuando deja de estar vacío y añade el punto rojo al dibujo -->
                    <a id="carrito" class="carrito {% if fila %}ocupado{% endif %}"></a>
                    

                    {% block contenido %}
                        
                    {% endblock contenido %}


                    <div class="listaCarrito hidden" id="listaCarrito">

                        <!-- botón x -->
                        <button id="cerrar" class="cerrar">
                            <svg id="cerrar" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" x="0px" y="0px" viewBox="0 0 100 125" style="enable-background:new 0 0 100 100;" xml:space="preserve">
                                <g>
                                    <path id="cerrar" fill="#fff" d="M50,16.2c-18.7,0-33.8,15.2-33.8,33.8c0,18.7,15.2,33.8,33.8,33.8c18.7,0,33.8-15.2,33.8-33.8C83.8,31.3,68.7,16.2,50,16.2   z M50,79c-16,0-29-13-29-29s13-29,29-29s29,13,29,29S66,79,50,79z"/>
                                    <g>
                                        <path id="cerrar" fill="#fff" d="M61.8,58.1c0.9,1,0.9,2.5,0,3.4c-0.5,0.5-1.1,0.7-1.7,0.7s-1.2-0.2-1.7-0.7l-8.1-8.1l-8.1,8.1c-0.5,0.5-1.1,0.7-1.7,0.7    s-1.2-0.2-1.7-0.7c-1-1-1-2.5,0-3.4l8.1-8.1l-8.1-8.1c-1-1-1-2.5,0-3.4c0.9-0.9,2.5-0.9,3.4,0l8.1,8.1l8.1-8.1c0.9-1,2.5-1,3.4,0    c0.9,0.9,0.9,2.5,0,3.4L53.7,50L61.8,58.1z"/>
                                    </g>
                                </g>                            
                            </svg>
                        </button>

                        <div class="lista">

                            <a>Cotización</a>
                            
                            <p class="tabla">

                                <span class="titulo producto">Producto</span>
                                <span class="titulo total">Total</span>
                                <span class="titulo eliminar">Eliminar</span>

                            </p>

                            
                            {% for f in fila %}
                            <form method="GET">
                                <p class="tabla">                                
                                    <span class="texto producto">{{f.Tarea.descripcion}}</span>
                                    <span class="texto total">${{f.costoTarea | intcomma}}</span>
                                    <span class="eliminar" id="delete {{t.titulo}}">
                                        <button type="submit" id="delete {{t.titulo}}" class="delete">
                                            <svg id="delete {{t.titulo}}" class="delete"" xmlns:x="http://ns.adobe.com/Extensibility/1.0/" xmlns:i="http://ns.adobe.com/AdobeIllustrator/10.0/" xmlns:graph="http://ns.adobe.com/Graphs/1.0/" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" x="0px" y="0px" viewBox="0 0 100 125" style="enable-background:new 0 0 100 100;" xml:space="preserve"><switch><foreignObject requiredExtensions="http://ns.adobe.com/AdobeIllustrator/10.0/" x="0" y="0" width="1" height="1"/>
                                                <g id="delete {{t.titulo}}" i:extraneous="self" >
                                                    <g id="delete {{t.titulo}}">
                                                        <path id="delete {{t.titulo}}" fill="white" d="M91.1,17.7H66.5v-3.4c0-6.6-5.3-11.9-11.9-11.9h-9.2c-6.6,0-11.9,5.3-11.9,11.9v3.4H8.9c-2.5,0-4.5,2-4.5,4.5     s2,4.5,4.5,4.5h3.3V81c0,9.1,7.4,16.5,16.5,16.5h42.5c9.1,0,16.5-7.4,16.5-16.5V26.8h3.3c2.5,0,4.5-2,4.5-4.5     S93.6,17.7,91.1,17.7z M42.6,14.4c0-1.6,1.3-2.8,2.8-2.8h9.2c1.6,0,2.8,1.3,2.8,2.8v3.4H42.6V14.4z M78.7,81     c0,4.1-3.3,7.5-7.5,7.5H28.7c-4.1,0-7.5-3.3-7.5-7.5V26.8h57.5V81z"/>
                                                        <path id="delete {{t.titulo}}" fill="white" d="M35.2,72.2c0.9,0.9,2,1.3,3.2,1.3c1.2,0,2.3-0.4,3.2-1.3l8.3-8.3l8.3,8.3c0.9,0.9,2,1.3,3.2,1.3c1.2,0,2.3-0.4,3.2-1.3     c1.8-1.8,1.8-4.6,0-6.4l-8.3-8.3l8.3-8.3c1.8-1.8,1.8-4.6,0-6.4c-1.8-1.8-4.6-1.8-6.4,0L50,51.1l-8.3-8.3c-1.8-1.8-4.6-1.8-6.4,0     c-1.8,1.8-1.8,4.6,0,6.4l8.3,8.3l-8.3,8.3C33.5,67.6,33.5,70.5,35.2,72.2z"/>
                                                    </g> 
                                                </g>
                                            </svg>
                                        </button>   
                                    </span>
                                </p>
                                <input type="text" value="{{f.Tarea.descripcion}}"
                                name="eliminar" readonly='true' class="invisible">
                                <input type="text" value="{{f.id_fila}}"
                                name="id-eliminar" readonly='true' class="invisible">
                                <input class="invisible" type="text" value="{{pieza}}"
						        name="pieza">
                            </form>
                            {% endfor %}
                            
                            <p class="tabla final">
                                
                                <a class="totalDefinitivo">Total</a>
                                <a class="totalDefinitivoValor">$ {{totalDefinitivo | intcomma}}</a>

                            </p>

                        </div>


                    </div>

                </div>
            </div>

        </div>

        <script src="{% static 'js/base.js' %}"></script>

    </body>

</html>